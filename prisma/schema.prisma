// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

// Jeux vidéo - Modèle principal
model JeuVideo {
  // Données/variables
  id          Int      @id @default(autoincrement())
  titre       String   @unique
  description String
  releaseDate DateTime @default(now())
  mis_avant   Boolean  @default(false) // par défaut un jeu n'est pas mis en avant
  
  // Relations
  editeur     Editeur  @relation(fields: [editeurId], references: [id])
  editeurId   Int
  genres      JeuVideoGenre[] // Relation Many-to-Many avec les genres
}

// Genres de jeux - Liste fixe prédéfinie
model Genre {
  id    Int    @id @default(autoincrement())
  nom   String @unique
  
  // Relation Many-to-Many avec les jeux
  jeux  JeuVideoGenre[]
}

// Table de jointure pour la relation Many-to-Many Jeux <-> Genres
model JeuVideoGenre {
  jeu     JeuVideo @relation(fields: [jeuId], references: [id], onDelete: Cascade)
  jeuId   Int
  genre   Genre    @relation(fields: [genreId], references: [id], onDelete: Cascade)
  genreId Int
  @@id([jeuId, genreId])
}

// Éditeurs de jeux
model Editeur {
  id           Int        @id @default(autoincrement())
  nom          String     @unique
  
  // Relations
  jeux_publies JeuVideo[] // Un éditeur peut publier plusieurs jeux
}